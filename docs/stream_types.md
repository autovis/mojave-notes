##### `trade_cmds` - Array of trade commands

Trade command generated by a strategy indicator and fed to broker or trade simulator

`enter`: create long position
  - `cmd_uuid` - newly-generated unique ID of command
  - `pos_uuid` - newly-generated unique ID of position to be opened
  - `label` - short label to identify entry type (optional, max 4 chars)
  - `direction` - direction of position (-1, 1))
  - `units` - lot size
  - `entry` -  set entry order price (optional - if omitted will do market order)
  - `stop` - set stop-loss order at price (optional)
  - `limit` - set take-profit order at price (optional)
  - `comment` - include comment with action (optional, max 40 chars)
  
`exit`: exit position
  - `cmd_uuid` - newly-generated unique ID of command
  - `pos_uuid` - existing unique ID of position to be closed
  - `comment` - include comment with action (optional, max 40 chars)
  
`set_stop`: set stop value
  - `cmd_uuid` - newly-generated unique ID of command
  - `pos_uuid` - existing unique ID of position to be updated
  - `dist` - set stop relative to entry (not implemented)
  - `price` - set stop loss at absolute price
  - `comment` - include comment with action (optional, max 40 chars)
  
`set_limit`: set limit value
  - `cmd_uuid` - newly-generated unique ID of command
  - `pos_uuid` - existing unique ID of position to be updated
  - `dist` - set limit relative to entry (not implemented)
  - `price` - set take profit at absolute price
  - `comment` - include comment with action (optional, max 40 chars)

##### `trade_evts` - Array of trade events

Trade events that come from broker or trade simulator

`trade_start`: start of a trade
  - `evt_uuid` - newly-generated unique ID of this event
  - `pos_uuid` - existing unique ID of opened position
  - `label`
  - `date`
  - `direction` (-1, 1)
  - `units`
  - `entry_price`
  - `stop`
  - `limit`
  
`trade_end`: end of a trade
  - `evt_uuid` - newly-generated unique ID of this event
  - `pos_uuid` - existing unique ID of closed position
  - `label`
  - `date`
  - `direction` (-1, 1)
  - `reason` (stop, limit, exit)
  - `units`
  - `entry_price`
  - `exit_price`
  - `pips`

`stop_updated`: stop-loss order price has been updated
  - `evt_uuid` - newly-generated unique ID of this event
  - `pos_uuid` - existing unique ID of updated position
  - `label`
  - `date`
  - `price`
  
`limit_updated`: take-profit order price has been updated
  - `evt_uuid` - newly-generated unique ID of this event
  - `pos_uuid` - existing unique ID of updated position
  - `label`
  - `date`
  - `price`

When writing an indicator that accepts input stream types of either `trade_evts` or `trade_cmds`, care must be taken to only respond to the first instance of each event or command per unique `evt_uuid` or `cmd_uuid` respectively, since a bar value will accumulate a list of all instances that were generated within the timestep window and call `on_bar_update()` with the same growing list on each tick.  To respond only to the first event that arrives, a function is defined within `initialize()` that returns `true` if an item has not been seen before and tracks it using a fixed-size array:
```
// filter on items that haven't been seen in 'n' unique instances
var seen_items = Array(20), seen_idx = 0;
this.is_first_seen = function(item) {
    if (seen_items.indexOf(item) > -1) return false;
    seen_items[seen_idx % seen_items.length] = item;
    seen_idx += 1;
    return true;
};
```
This function may then be used from `on_bar_update()` to filter new events (or commands):
```
_.each(event_stream.get(), function(evt) {
    if (!this.is_first_seen(evt[1].evt_uuid)) return; // skip events already processed

    // ... process event ...

});
```
